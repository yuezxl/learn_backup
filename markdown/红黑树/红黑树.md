#红黑树
##红黑树简介
> 红黑树是计算机中使用比较普遍的一种数据结构. 在JDK1.8版本后的hashMap中，ThreadLocalMap，TreeMap中都使用了这一数据结构. 在linux系统内核线程调度算法中也使用了这一经典的数据结构.
> 红黑树是一种自平衡二叉树，简称"对称二叉B树". 红黑树是一种二叉查找树，但每个节点上增加一个存储位表示节点的颜色，可以是Red或者Black.通过对任何一条从根到叶子节点着色方式的限制，红黑树确保没有一条路径会比其他路径长出一倍，因而是接近平衡的。

## 红黑树的定义
为了保证一颗有n个节点的红黑树的高度始终保持在O(logn)，其查找、插入、删除的时间复杂度最坏为O(logn).

1. 每个节点要么是红的，要么是黑的
2. 根节点是黑的
3. 每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的
4. 每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的
5. 对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点

下图为红黑树的示例。
![](rbtree.png)

##红黑树的旋转
当在对红黑树进行插入和删除操作时，对树做了修改可能会破坏红黑树的性质


## 红黑树的删除
> 删除红黑树中的一个结点，删除的结点是其子结点状态和颜色的组合。子结点的状态有三种：无子结点、有一个子结点、有两个子结点。颜色分为红色和黑色。

1. 被删除结点无子结点，且被删除结点颜色为红色--直接删除(不破坏红黑树的性质)
2. 被删除结点无子结点，且被删除的结点为黑色--比较复杂的操作
    因为被删除的结点为黑色的，所以会破坏性质5. 可以在替代结点上增加一个额外的黑色，这样就可以保持红黑树的性质5不被破坏。

>情形1：brother为黑色，且brother有一个与其方向一致的红色子结点son，所谓方向一致，是指brother为father的左子结点，son也为brother的左子结点；或者brother为father的右子结点，son也为brother的右子结点。

3. 被删除结点有一个子结点，且被删除结点为红色(不符合性质5，因为子结点只可能为黑色，到叶子结点的黑色结点数不一样)
4. 被删除结点有一个子结点，且被删除结点为黑色
5. 被删除结点有两个子结点，且被删除的结点为黑色
6. 被删除结点有两个子结点，且被删除的结点为红色

现在分析每一种情况


https://zhuanlan.zhihu.com/p/25402654

https://segmentfault.com/a/1190000012115424





